// 重写Spring-batch-core默认注入的JobRepository

class CustomDefaultBatchConfiguration extends DefaultBatchConfiguration {

    private DataSource dataSource;

    @Override
    public JobRepository jobRepository() throws BatchConfigurationException {
        try {
            JobRepositoryFactoryBean factory = new JobRepositoryFactoryBean();
            factory.setDataSource(dataSource);
            factory.setTransactionManager(getTransactionManager());
            factory.setIsolationLevelForCreate("ISOLATION_READ_COMMITTED");
            factory.afterPropertiesSet();
            return factory.getObject();
        } catch (Exception var3) {
            throw new BatchConfigurationException("Unable to configure the default job repository", var3);
        }
    }
}